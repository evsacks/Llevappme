{% extends 'layout.html' %}
{% block section %}

    {% if viaje %}
        <section>
            <div class="row gtr-200">
                <div class="col-6 col-12-medium">
                    <ul class="alt">
                        <li>
                            <h3 style="margin-bottom: 0px;">
                                <a class="fas fa-map-marker-alt" style="margin-right: 10px;"></a>
                                {{viaje.ubicacion.direccion_inicial}}
                            </h3>
                            <h3 style="margin-bottom: 0px;">
                                <a class="fas fa-chevron-down fa-xs"></a>
                            </h3>
                            <h3>
                                <a class="fas fa-map-marker-alt" style="margin-right: 10px;"></a>
                                {{viaje.ubicacion.direccion_final}}
                            </h3>
                        </li>
                        <li>
                            Fecha Salida: {{ formato_fecha(viaje.fecha_inicio) }}
                            <br>
                            Hora Salida: {{ formato_hora(viaje.fecha_inicio) }}
                        </li>
                        <li>
                            Disponibilidad: {{viaje.asientos_disponibles}}
                        </li>
                        <li>
                            Distancia:  KM.
                        </li>
                    </ul>
                    <ul class="actions fit">
                        <li>
                            {% if (current_user.id != viaje.conductor.id_usuario) %}
                                <div class="row">
                                    <div class="col-4 col-12-medium">
                                        <ul class="actions stacked">
                                            <li><a  href="#" class="button">Conductor</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-4 col-12-medium">
                                        <ul class="actions stacked">
                                            <li><a href="#" class="button fit">Pasajeros</a></li>
                                        </ul>
                                    </div>
                                    {% if solicitud %}
                                        <div class="col-4 col-12-medium">
                                            <ul class="actions stacked">
                                                <li><a  href="{{url_for('viaje_bp.SolicitarViaje', idViaje=viaje.id)}}"
                                                    class="button fit">
                                                    Â¡Quiero unirme!
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    {% else %}
                                        <div class="col-4 col-12-medium">
                                            <ul class="actions stacked">
                                                <li><a  href="{{url_for('viaje_bp.SolicitarViaje', idViaje=viaje.id)}}"
                                                    class="button fit">
                                                    Cancelar Solicitud
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    {% endif %}
                                </div>  
                            {% elif current_user.id == viaje.conductor.id_usuario %}
                                <div class="row">
                                    <div class="col-4 col-12-medium">
                                        <ul class="actions stacked">
                                            <li>
                                                <a  href="{{url_for('viaje_bp.VerPasajeros', idViaje=viaje.id)}}"
                                                class="button">Pasajeros</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-4 col-12-medium">
                                        <ul class="actions stacked">
                                            <li><a href="{{ url_for('viaje_bp.EditarViaje', idViaje=viaje.id) }}" class="button fit">Editar</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-4 col-12-medium">
                                        <ul class="actions stacked">
                                            <li><a href="#" class="button primary fit">Eliminar</a></li>
                                        </ul>
                                    </div>
                                </div>                         
                            {% endif %}
                        </li>
                    </ul>
                    
                </div>
                <div class="col-6 col-12-medium">
                    <h3>Mapa</h3>
                    <div id="map" style="height: 300px;"
                        data-lat-inicial="{{ viaje.ubicacion.latitud_inicial }}"
                        data-lng-inicial="{{ viaje.ubicacion.longitud_inicial }}"
                        data-lat-final="{{ viaje.ubicacion.latitud_final }}"
                        data-lng-final="{{ viaje.ubicacion.longitud_final }}"></div>
                </div>
            </div>
        </section>
    {% endif %}
{% endblock %}